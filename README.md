# grunt-docarray

> A Grunt plugin for convert ing an HTML document to a Javascript array.

## Getting Started
This plugin requires Grunt `~0.4.0`

If you haven't used [Grunt](http://gruntjs.com/) before, be sure to check out the
[Getting Started](http://gruntjs.com/getting-started) guide, as it explains how to create a
[Gruntfile](http://gruntjs.com/sample-gruntfile) as well as install and use Grunt plugins. Once you're familiar with
that process, you may install this plugin with this command:

```shell
npm install grunt-docarray --save-dev
```

Once the plugin has been installed, it may be enabled inside your Gruntfile with this line of JavaScript:

```js
grunt.loadNpmTasks('grunt-docarray');
```

## The "docarray" task

This Grunt task reads a list of source HTML files and generates a corresponding Javascript file with each line in the
HTML becoming an item in an array. This can be useful if you are using a service that only exposes a Javascript
interface for sending emails, but you would like to keep the templates themselves in HTML for easy editing.

It is best illustrated with an example. The following HTML:

### basic.html
```html
<html>
<head></head>
<body>
   <p>This is content!</p>
</body>
```

Would generate the following Javascript file:

### basic.js
```js
var basic = [
    '<html>',
    '<head></head>',
    '<body>',
    '   <p>This is content!</p>',
    '</body>',
];
```

The variable in Javascript receives it's name from the basename of the source HTML file.

### Overview
In your project's Gruntfile, add a section named `docarray` to the data object passed into `grunt.initConfig()`.

```js
grunt.initConfig({
  docarray: {
    options: {
      // Task-specific options go here.
    },
    your_target: {
      // Target-specific file lists and/or options go here.
    },
  },
});
```

### Options

#### options.preserveWhitespace
Type: `Boolean`
Default value: `false`

Indicates if the leading and trailing whitespace for each line should be preserved. If set to `false` (default) this
also implies that empty lines are omitted.

#### options.addExports
Type: `Boolean`
Default value: `true`

Indicate if each variable should be exported using CommonJS exports.

```js
exports.basic = basic;
```

#### options.addJoin
Type: `Boolean`
Default value: `true`

Indicates if each variable should have .join(options.joinSeparator) appended to it.

```js
var basic = [
    '<html>',
    '<head></head>',
    '<body>',
    '   <p>This is content!</p>',
    '</body>',
].join('\n');
```

#### options.joinSeparator
Type: `String`
Default value: `\\n`

The string passed to .join() if options.addJoin is true. If options.addJoin is false, this is ignored.

**NOTE** If the string contains a backslash (such as a newline character), the backslash must be escaped with an
additional backslash.

#### options.header
Type: `String`
Default value: `'// This file was autogenerated by grunt-docarray at ' + new Date()`

This is a string that is prepended to the generated Javascript file. It must be valid Javascript or be commented out.

### Usage Examples

#### Default Options
In the following example, several HTML files are converted to docarrays
and the result is written to a Javascript file.

```js
grunt.initConfig({
  docarray: {
    files: {
      'dist/js/emails.js': ['emails/welcome.html', 'emails/resetpassword.html']
    },
  },
});
```

## Contributing
In lieu of a formal styleguide, take care to maintain the existing coding style. Add unit tests for any new or changed
functionality. Lint and test your code using [Grunt](http://gruntjs.com/).

## Release History

### 0.2.0

* Add support for generating .join()

### 0.1.0

* Initial Release
